<pre>
  BIP: 101
  레이어: 컨센서스 (하드 포크)
  제목: 최대 블록 사이즈 증가
  작성자: Gavin Andresen <gavinandresen@gmail.com>
  코멘트-요약: 아직 코멘트 없음.
  코멘트-URI: https://github.com/bitcoin/bips/wiki/Comments:BIP-0101
  상태: 중단됨
  타입: 표준 트랙
  생성일: 2015-06-22
</pre>

==Abstract==

이 BIP는 고정된 1메가바이트의 최대 블록 크기를 시간이 지남에 따라 예측 가능한 비율로 증가하는 최대 크기로 대체할 것을 제안합니다.

==Motivation==

비트코인 네트워크의 거래량은 계속 증가하고 있으며, 곧 1메가바이트 최대 블록 크기에 의해 강요된 10분당 1메가바이트 제한에 도달할 것입니다. 최대 크기를 늘리면 해당 제한이 비트코인 채택과 성장에 미치는 영향을 줄일 수 있습니다.

==Specification==

배포 후(자세한 내용은 배포(Deployment) 섹션 참조), 메인 네트워크에서 허용되는 블록의 최대 크기는 블록 헤더의 타임스탬프를 기준으로 계산됩니다.

최대 크기는 타임스탬프 2016-01-11 00:00:00 UTC(타임스탬프 1452470400)에서 8,000,000 바이트이며, 2036-01-06 00:00:00 UTC(타임스탬프 2083190400)까지 63,072,000초(2년, 윤년 무시)마다 두 배씩 증가합니다. 두 배 증가 사이의 최대 블록 크기는 블록의 타임스탬프에 따라 선형적으로 증가합니다. 2036-01-06 00:00:00 UTC 이후 블록의 최대 크기는 8,192,000,000 바이트입니다.

(아래 배포 섹션에 설명되어 있는 것처럼) 블록 타임스탬프가 활성화 시간 이후라고 가정하여 정수 수학(integer math)을 사용하여 의사 코드로 표현:

    function max_block_size(block_timestamp):

        time_start = 1452470400
        time_double = 60*60*24*365*2
        size_start = 8000000
        if block_timestamp >= time_start+time_double*10
            return size_start * 2^10

        // Piecewise-linear-between-doublings growth:
        time_delta = block_timestamp - time_start
        doublings = time_delta / time_double
        remainder = time_delta % time_double
        interpolate = (size_start * 2^doublings * remainder) / time_double
        max_size = size_start * 2^doublings + interpolate

        return max_size

==Deployment==

배포는 해시파워 압도적 다수 투표(BIP34에서 사용된 기법과 유사)로 제어되지만, 가능한 가장 빠른 활성화 시간은 2016-01-11 00:00:00 UTC입니다.

활성화는 최상위 체인에 있는 1,000개의 연속 블록 중 750개의 버전 번호가 첫 번째, 두 번째, 세 번째, 30번째 비트(16진수 0x20000007)로 설정되면 이루어집니다. 활성화 시간은 750번째 블록의 타임스탬프에 2주(1,209,600초)의 유예 기간을 더하여 나머지 마이너나 서비스가 더 큰 블록을 지원하도록 업그레이드할 수 있는 시간을 제공합니다. 2016-01-11 00:00:00 UTC보다 2주 이상 전에 압도적 다수가 달성되면 활성화 시간은 2016-01-11 00:00:00 UTC가 됩니다.

블록 버전 번호는 활성화를 위해서만 사용되며, 활성화가 완료되면 최대 블록 크기는 블록의 버전 번호와 관계없이 사양(specification) 섹션에 설명된 대로 됩니다.

==Test network==

테스트 네트워크 매개변수는 메인 네트워크와 동일하지만, 더 쉬운 암도적 다수 조건과 더 짧은 유예 기간으로 더 일찍 시작한다는 점이 다릅니다:

    starting time: 1 Aug 2015 (timestamp 1438387200)
    activation condition: 75 of 100 blocks
    grace period: 24 hours

==Rationale==

초기 크기 8,000,000 바이트는 현재 참조 구현 코드에서 블록사이즈를 증가시켜 테스트하고 대역폭이 제한된 네트워크의 채굴자(특히 중국의 만리방화벽 뒤에 있는 중국 채굴자)로부터 피드백을 받은 후 선택되었습니다.

2배 증가 간격은 CPU 성능, 스토리지 및 인터넷 대역폭의 장기적인 성장 추세를 기반으로 선택되었습니다. 기하급수적인 성장이 영원히 지속될 수 없기 때문에 20년이라는 제한이 선택되었습니다. 장기적인 추세가 계속되지 않는다면 마이너 합의(소프트 포크)를 통해 최대 블록 크기를 줄일 수 있습니다.

타임스탬프는 모든 블록의 헤더에 포함되어 있기 때문에 계산은 블록체인의 높이가 아닌 타임스탬프를 기준으로 합니다. 이를 통해 구현은 블록의 헤더를 다운로드한 후 트랜잭션을 다운로드하기 전에 블록의 최대 크기를 알 수 있습니다.

이 배포 계획은 Jeff Garzik이 제안한 BIP100 블록 크기 증가에서 가져온 것으로, 채굴자, 상인, 풀 노드 운영 최종 사용자에게 더 큰 블록을 지원하는 소프트웨어로 업그레이드할 수 있는 충분한 시간을 제공하기 위해 설계되었습니다. 75%의 압도적 다수가 선택되어 하나의 대규모 마이닝 풀이 블록 크기 증가에 대해 효과적인 거부권을 갖지 못하도록 했습니다. 버전 번호 체계는 피터 우일이 제안한 "버전 비트" BIP와 호환되도록 설계되었으며, 도입되는 과정에서 다른 합의 규칙 변경을 방해하지 않도록 설계되었습니다.

==Objections to this proposal==

1MB 블록 크기를 늘리는 것은 [https://www.google.com/webhp?#q=1mb+limit+site%3Abitcointalk.org 수년 동안 논의되고 토론되어 왔습니다].

===Centralization of full nodes===

The number of fully-validating nodes reachable on the network has been steadily declining. Increasing the capacity of the network to handle transactions by increasing the maximum block size may accelerate that decline, meaning a less distributed network that is more vulnerable to disruption. The size of this effect is debatable; the author of this BIP believes that the decline in fully validating nodes on the network is largely due to the availability of convenient, attractive, secure, lightweight wallet software and the general trend away from computing on desktop computers to mobile phones and tablets.

Increasing the capacity of the network to handle transactions should enable increased adoption by users and businesses, especially in areas of the world where existing financial infrastructure is weak. That could lead to a more robust network with nodes running in more political jurisdictions.

===Centralization of mining: costs===

Miners benefit from low-latency, high-bandwidth connections because they increase their chances of winning a "block race" (two or more blocks found at approximately the same time). With the current peer-to-peer networking protocol, announcing larger blocks requires more bandwidth. If the costs grow high enough, the result will be a very small number of very large miners.

The limits proposed by this BIP are designed so that running a fully validating node has very modest costs, which, if current trends in the cost of technology continue, will become even less expensive over time.

===Centralization of mining: big-block attacks===

[http://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-June/008820.html Simulations show] that with the current peer-to-peer protocol, miners behind high-latency or low-bandwidth links are at a disadvantage compared to miners connected to a majority of hashpower via low-latency, high-bandwidth links. Larger blocks increase the advantage of miners with high-bandwidth connections, although that advantage can be minimized with changes to the way new blocks are announced (e.g. http://bitcoinrelaynetwork.org/ ).

If latency and bandwidth to other miners were the only variable that affected the profitability of mining, and miners were driven purely by profit, the end result would be one miner running on one machine, where latency was zero and bandwidth was essentially infinite.

However, many other factors influence miner profitability, including cost of electricity and labor and real estate, ability to use waste heat productively, access to capital to invest in mining equipment, etc. Increasing the influence of bandwidth in the mining profitability equation will not necessarily lead to more centralization.

===Unspent Transaction Output Growth===

This BIP makes no attempt to restrict the approximately 100% per-year growth in unspent transaction outputs (see http://gavinandresen.ninja/utxo-uhoh for details), because the author believe that problem should be solved by a further restriction on blocks described in a separate BIP (perhaps an additional limit on how much the transactions in any block may increase the UTXO set size).

==Long-term fee incentives==

http://gavinandresen.ninja/block-size-and-miner-fees-again

==Other solutions considered==

There have been dozens of proposals for increasing the block size over the years. Some notable ideas:

===One-time increase===

A small, quick one-time increase to, for example, 2MB blocks, would be the most conservative option.

However, a one-time increase requires just as much care in testing and deployment as a longer-term fix. And the entire debate over how large or small a limit is appropriate would be repeated as soon as the new limit was reached.

===Dynamic limit proposals===

BIP 100 proposes a dynamic limit determined by miner preferences expressed in coinbase transactions, with limits on the rate of growth. It gives miners more direct control over the maximum block size, which some people see as an advantage over this proposal and some see as a disadvantage. It is more complex to implement, because the maximum allowed size for a block depends on information contained in coinbase transactions from previous blocks (which may not be immediately known if block contents are being fetched out-of-order in a 'headers-first' mode).

[https://bitcointalk.org/index.php?topic=1078521.0 Meni Rosenfeld has proposed] that miners sacrifice mining reward to "pay for" bigger blocks, so there is an incentive to create bigger blocks only if transaction fees cover the cost of creating a larger block. This proposal is significantly more complex to implement, and it is not clear if a set of parameters for setting the cost of making a block bigger can be found that is not equivalent to a centrally-controlled network-wide minimum transaction fee.

==Compatibility==

This is a hard-forking change to the Bitcoin protocol; anybody running code that fully validates blocks must upgrade before the activation time or they will risk rejecting a chain containing larger-than-one-megabyte blocks.

Simplified Payment Verification software is not affected, unless it makes assumptions about the maximum depth of a transaction's merkle branch based on the minimum size of a transaction and the maximum block size.

==Implementation==

https://github.com/bitcoin/bitcoin/pull/6341

